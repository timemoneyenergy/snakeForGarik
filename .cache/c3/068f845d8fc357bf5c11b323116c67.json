{"id":"index.html","dependencies":[{"name":"_css_loader","parent":"E:\\web\\snake2d\\src\\index.html","resolved":"E:\\web\\snake2d\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"},{"name":"E:\\web\\snake2d\\package.json","includedInParent":true,"mtime":1589466059639}],"generated":{"html":"<head>\r\n\r\n    <title>Змейка-тетрис для гарика</title>\r\n  \r\n   \r\n    <style>html, body {\r\n  \r\n        height: 100%;\r\n  \r\n        margin: 0;\r\n  \r\n      }\r\n  \r\n   \r\n  \r\n      body {\r\n  \r\n        background: black;\r\n  \r\n        display: flex;\r\n  \r\n        align-items: center;\r\n  \r\n        justify-content: center;\r\n  \r\n      }\r\n  \r\n   \r\n  \r\n      canvas {\r\n  \r\n        border: 1px solid white;\r\n  \r\n      }</style>\r\n  \r\n   \r\n  </head>\r\n  \r\n  <body>\r\n  \r\n  \r\n    <canvas width=\"400\" height=\"400\" id=\"game\"></canvas>\r\n  \r\n   \r\n  \r\n    <script>var canvas = document.getElementById('game');\nvar context = canvas.getContext('2d');\nvar grid = 16;\nvar count = 0;\nvar snake = {\n  x: 160,\n  y: 160,\n  dx: grid,\n  dy: 0,\n  cells: [],\n  maxCells: 4\n};\nvar apple = {\n  x: 320,\n  y: 320\n};\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction loop() {\n  requestAnimationFrame(loop);\n\n  if (++count < 4) {\n    return;\n  }\n\n  count = 0;\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  snake.x += snake.dx;\n  snake.y += snake.dy;\n\n  if (snake.x < 0) {\n    snake.x = canvas.width - grid;\n  } else if (snake.x >= canvas.width) {\n    snake.x = 0;\n  }\n\n  if (snake.y < 0) {\n    snake.y = canvas.height - grid;\n  } else if (snake.y >= canvas.height) {\n    snake.y = 0;\n  }\n\n  snake.cells.unshift({\n    x: snake.x,\n    y: snake.y\n  });\n\n  if (snake.cells.length > snake.maxCells) {\n    snake.cells.pop();\n  }\n\n  context.fillStyle = 'red';\n  context.fillRect(apple.x, apple.y, grid - 1, grid - 1);\n  context.fillStyle = 'green';\n  snake.cells.forEach(function (cell, index) {\n    context.fillRect(cell.x, cell.y, grid - 1, grid - 1);\n\n    if (cell.x === apple.x && cell.y === apple.y) {\n      snake.maxCells++;\n      apple.x = getRandomInt(0, 25) * grid;\n      apple.y = getRandomInt(0, 25) * grid;\n    }\n\n    for (var i = index + 1; i < snake.cells.length; i++) {\n      if (cell.x === snake.cells[i].x && cell.y === snake.cells[i].y) {\n        snake.x = 160;\n        snake.y = 160;\n        snake.cells = [];\n        snake.maxCells = 4;\n        snake.dx = grid;\n        snake.dy = 0;\n        apple.x = getRandomInt(0, 25) * grid;\n        apple.y = getRandomInt(0, 25) * grid;\n      }\n    }\n  });\n}\n\ndocument.addEventListener('keydown', function (e) {\n  if (e.which === 37 && snake.dx === 0) {\n    snake.dx = -grid;\n    snake.dy = 0;\n  } else if (e.which === 38 && snake.dy === 0) {\n    snake.dy = -grid;\n    snake.dx = 0;\n  } else if (e.which === 39 && snake.dx === 0) {\n    snake.dx = grid;\n    snake.dy = 0;\n  } else if (e.which === 40 && snake.dy === 0) {\n    snake.dy = grid;\n    snake.dx = 0;\n  }\n});\nrequestAnimationFrame(loop);</script>\r\n  \r\n   \r\n  </body>\r\n  \r\n  "},"sourceMaps":null,"error":null,"hash":"999124ad5f1fa6e38903814489700f0b","cacheData":{"env":{}}}